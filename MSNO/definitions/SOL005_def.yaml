# Copyright (c) ETSI 2017.
# https://forge.etsi.org/etsi-forge-copyright-notice.txt
definitions:
  Identifier:
    description: >
      An identifier with the intention of being globally unique.
    type: string

  DateTime:
    description: >
      Date-time stamp.
      Representation: String formatted according toas defined by the date-time production in IETF RFC 3339.
    type: string
    format: date-time

  Uri:
    description: >
      String formatted according to IETF RFC 3986.
    type: string
    format: uri

  Boolean:
    description: >
      The Boolean is a data type having two values (TRUE and FALSE).
    type: boolean

  Version:
    description: >
      A Version. Representation: string of variable length.
    type: string

  Checksum:
    description: >
      This type represents the checksum of a VNF package or an artifact file.
    required:
      - algorithm
      - hash
    type: object
    properties:
      algorithm:
        description: >
          Name of the algorithm used to generate the checksum,
          as defined in ETSI GS NFV-SOL 004 [5]. For example, SHA-256, SHA-512.
        type: string
      hash:
        description: >
          The hexadecimal value of the checksum.
        type: string

  String:
    description: >
      A string as defined in IETF RFC 8259.
    type: string

  Number:
    description: >
      A number as defined in IETF RFC 8259.
    type: number

  KeyValuePairs:
    description: >
      This type represents a list of key-value pairs. The order of the pairs in the list is not significant.
      In JSON, a set of key- value pairs is represented as an object. It shall comply with the provisions
      defined in clause 4 of IETF RFC 7159.
    type: object

  ProblemDetails:
    #SOL005 location: 4.3.5.3-1
    description: >
      The definition of the general "ProblemDetails" data structure from
      IETF RFC 7807 [19] is reproduced in this structure. Compared to the
      general framework defined in IETF RFC 7807 [19], the "status" and
      "detail" attributes are mandated to be included by the present document,
      to ensure that the response contains additional textual information about
      an error. IETF RFC 7807 [19] foresees extensibility of the
      "ProblemDetails" type. It is possible that particular APIs in the present
      document, or particular implementations, define extensions to define
      additional attributes that provide more information about the error.
      The description column only provides some explanation of the meaning to
      Facilitate understanding of the design. For a full description, see
      IETF RFC 7807 [19].
    type: object
    required:
      - status
      - detail
    properties:
      type:
        description: >
          A URI reference according to IETF RFC 3986 [5] that identifies the
          problem type. It is encouraged that the URI provides human-readable
          documentation for the problem (e.g. using HTML) when dereferenced.
          When this member is not present, its value is assumed to be
          "about:blank".
        type: string
        format: URI
      title:
        description: >
          A short, human-readable summary of the problem type. It should not
          change from occurrence to occurrence of the problem, except for
          purposes of localization. If type is given and other than
          "about:blank", this attribute shall also be provided.
          A short, human-readable summary of the problem
          type.  It SHOULD NOT change from occurrence to occurrence of the
          problem, except for purposes of localization (e.g., using
          proactive content negotiation; see [RFC7231], Section 3.4).
        type: string
      status:
        description: >
          The HTTP status code for this occurrence of the problem.
          The HTTP status code ([RFC7231], Section 6) generated by the origin
          server for this occurrence of the problem.
        type: integer
      detail:
        description: >
          A human-readable explanation specific to this occurrence of the
          problem.
        type: string
      instance:
        description: >
          A URI reference that identifies the specific occurrence of the
          problem. It may yield further information if dereferenced.
        type: string
        format: URI

  Link:
    description: >
      This type represents a link to a resource.
    type: object
    required:
      - href
    properties:
      href:
        description: >
          URI of a resource referenced from a notification.
          Should be an absolute URI (i.e. a URI that contains {apiRoot}),
          however, may be a relative URI (i.e. a URI where the {apiRoot} part is omitted)
          if the {apiRoot} information is not available.
        type: string
        format: url

  NotificationLink:
    description: >
      This type represents a link to a resource in a notification, using an absolute or relative URI.
    type: object
    required:
      - href
    properties:
      href:
        description: >
          URI of a resource referenced from a notification.
          Should be an absolute URI (i.e. a URI that contains {apiRoot}),
          however, may be a relative URI (i.e. a URI where the {apiRoot} part is omitted)
          if the {apiRoot} information is not available.
        type: string
        format: url

  NsInstanceSubscriptionFilter:
    description: >
      This type represents subscription filter criteria to match NS instances.
    type: object
    properties:
      nsdIds:
        description: >
          If present, match NS instances that were created
          based on a NSD identified by one of the nsdId
          values listed in this attribute.
        type: array
        items:
          $ref: "#/definitions/Identifier"
      vnfdIds:
        description: >
          If present, match NS instances that contain VNF
          instances that were created based on a VNFD
          identified by one of the vnfdId values listed in
          this attribute.
        type: array
        items:
          $ref: "#/definitions/Identifier"
      pnfdIds:
        description: >
          If present, match NS instances that contain
          PNFs that are represented by a PNFD identified
          by one of the pnfdId values listed in this
          attribute.
        type: array
        items:
          $ref: "#/definitions/Identifier"
      nsInstanceIds:
        description: >
          If present, match NS instances with an instance
          identifier listed in this attribute.
        type: array
        items:
          $ref: "#/definitions/Identifier"
      nsInstanceNames:
        description: >
          If present, match NS instances with a NS
          Instance Name listed in this attribute.
        type: array
        items:
          $ref: "#/definitions/String"

  ResourceHandle:
    description: >
      This type represents the information that allows addressing a virtualised resource
      that is used by a VNF instance or by an NS instance. Information about the resource
      is available from the VIM.
    type: object
    required:
      - resourceId
    properties:
      vimId:
        description: >
          Identifier of the VIM under whose control this resource is placed.
          This attribute shall be present if VNF-related resource management
          in direct mode is applicable. It shall also be present for resources
          that are part of an NS instance such as virtual link resources.
        $ref: "#/definitions/Identifier"
      resourceProviderId:
        description: >
          Identifier of the entity responsible for the management of the resource.
          This attribute shall only be supported and present when VNF-related resource
          management in indirect mode is applicable.
          The identification scheme is outside the scope of the present document.
        $ref: "#/definitions/Identifier"
      resourceId:
        description: >
          Identifier of the resource in the scope of the VIM or the resource provider.
        $ref: "#/definitions/IdentifierInVim"
      vimLevelResourceType:
        description: >
          Type of the resource in the scope of the VIM or the resource provider.
          The value set of the "vimLevelResourceType" attribute is within the scope
          of the VIM or the resource provider and can be used as information that
          complements the ResourceHandle.
        type: string

  IdentifierInVim:
    description: >
      An identifier maintained by the VIM or other resource provider.
      It is expected to be unique within the VIM instance. Representation: string of variable length.
    type: string

  IdentifierInVnfd:
    description: >
      Identifier of the VNF Virtual Link Descriptor (VLD) in the VNFD.
    type: string

  ApiVersionInformation:
    description: >
      This type represents API version information.
    type: object
    required:
      - uriPrefix
      - apiVersions
    properties:
      uriPrefix:
        description: >
          Specifies the URI prefix for the API, in the following form
          {apiRoot}/{apiName}/{apiMajorVersion}/.
        type: string
      apiVersions:
        description: >
          Version(s) supported for the API signalled by the uriPrefix attribute.
        type: array
        items:
          type: object
          required:
            - version
          properties:
            version:
              description: >
                Identifies a supported version. The value of the version attribute shall
                be a version identifier as specified in clause 4.6.1.
              type: string
            isDeprecated:
              description: >
                If such information is available, this attribute indicates whether use of the
                version signaled by the version attribute is deprecated (true) or not (false).
                A deprecated version is still supported by the API producer but is recommended
                not to be used any longer. When a version is no longer supported, it does not
                appear in the response body.
              $ref: "#/definitions/Boolean"
            retirementDate:
              description: >
                The date and time after which the API version will no longer be supported.
                This attribute may be included if the value of the isDeprecated attribute
                is set to true and shall be absent otherwise.
              $ref: "#/definitions/DateTime"

  SubscriptionAuthentication:
    type: object
    required:
      - authType
    properties:
      authType:
        description: >
          Defines the types of Authentication / Authorization which the API
          consumer is willing to accept when receiving a notification.
          Permitted values:
          - BASIC: In every HTTP request to the notification endpoint, use
            HTTP Basic authentication with the client credentials.
          - OAUTH2_CLIENT_CREDENTIALS: In every HTTP request to the
            notification endpoint, use an OAuth 2.0 Bearer token, obtained
            using the client credentials grant type.
          - TLS_CERT: Every HTTP request to the notification endpoint is sent
            over a mutually authenticated TLS session, i.e. not only the
            server is authenticated, but also the client is authenticated
            during the TLS tunnel setup.
        type: array
        items:
          type: string
          enum:
            - BASIC
            - OAUTH2_CLIENT_CREDENTIALS
            - TLS_CERT
      paramsBasic:
        description: >
          Parameters for authentication/authorization using BASIC.
          Shall be present if authType is "BASIC" and the contained
          information has not been provisioned out of band.
          Shall be absent otherwise.
        type: object
        properties:
          userName:
            description: >
              Username to be used in HTTP Basic authentication. Shall be
              present if it has not been provisioned out of band.
            type: string
          password:
            description: >
              Password to be used in HTTP Basic authentication. Shall be
              present if it has not been provisioned out of band.
            type: string
      paramsOauth2ClientCredentials:
        description: >
          Parameters for authentication/authorization using
          OAUTH2_CLIENT_CREDENTIALS.
          Shall be present if authType is "OAUTH2_CLIENT_CREDENTIALS" and the
          contained information has not been provisioned out of band.
          Shall be absent otherwise.
        type: object
        properties:
          clientId:
            description: >
              Client identifier to be used in the access token request of the
              OAuth 2.0 client credentials grant type.
              Shall be present if it has not been provisioned out of band.
              The clientId and clientPassword passed in a subscription shall
              not be the same as the clientId and clientPassword that are used
              to obtain authorization for API requests. Client credentials may
              differ between subscriptions. The value of clientPassword should
              be generated by a random process.
            type: string
          clientPassword:
            description: >
              Client password to be used in the access token request of the
              OAuth 2.0 client credentials grant type.
              Shall be present if it has not been provisioned out of band.
              The clientId and clientPassword passed in a subscription shall
              not be the same as the clientId and clientPassword that are used
              to obtain authorization for API requests. Client credentials may
              differ between subscriptions. The value of clientPassword should
              be generated by a random process.
            type: string
          tokenEndpoint:
            description: >
              The token endpoint from which the access token can be obtained.
              Shall be present if it has not been provisioned out of band.
            $ref: "#/definitions/Uri"